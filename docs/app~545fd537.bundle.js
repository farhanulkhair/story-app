"use strict";(self.webpackChunkstory_app=self.webpackChunkstory_app||[]).push([[703],{619:(t,e,r)=>{r.d(e,{A:()=>g});var n=r(703),a=r(631);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype);return h(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var s=f(e,r,n);if("normal"===s.type){if(a=n.done?4:2,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=4,n.method="throw",n.arg=s.arg)}}}(e,n,new P(a||[])),!0),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function d(){}function m(){}function v(){}var y={};h(y,u,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==r&&n.call(w,u)&&(y=w);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,i,u,c){var s=f(t[a],t,i);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==o(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):e.resolve(l).then((function(t){h.value=t,u(h)}),(function(t){return r("throw",t,u,c)}))}c(s.arg)}var a;h(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function x(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function S(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function P(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function j(e){if(null!=e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return m.prototype=v,h(b,"constructor",v),h(v,"constructor",m),m.displayName=h(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,h(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),h(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(b),h(b,s,"Generator"),h(b,u,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:j(e),r,n},"next"===this.method&&(this.arg=t),p}},e}function u(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){u(o,n,a,i,c,"next",t)}function c(t){u(o,n,a,i,c,"throw",t)}i(void 0)}))}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}const l=function(){return t=function t(e){var r=e.view;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=r,this._stream=null,this._photoBlob=null,this._cameraDevices=[],window.addEventListener("hashchange",this._handlePageLeave.bind(this))},e=[{key:"populateCameraDevices",value:(f=c(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.enumerateDevices();case 3:e=t.sent,this._cameraDevices=e.filter((function(t){return"videoinput"===t.kind})),this._view.updateCameraDevices(this._cameraDevices),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,a._d)("Gagal memuat daftar kamera: ".concat(t.t0.message));case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return f.apply(this,arguments)})},{key:"handleCameraButtonClick",value:(l=c(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this._stream){t.next=5;break}return this._stopMediaStream(),this._view.updateCameraUI(!1,null!==this._photoBlob),t.abrupt("return");case 5:return t.next=7,this._startCamera();case 7:this._view.updateCameraUI(!0,!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,a._d)("Gagal mengakses kamera: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(){return l.apply(this,arguments)})},{key:"handleCameraChange",value:(h=c(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._startCamera(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),(0,a._d)("Gagal mengganti kamera: ".concat(t.t0.message));case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return h.apply(this,arguments)})},{key:"handlePhotoCapture",value:function(t){this._photoBlob=t;var e=URL.createObjectURL(t);this._view.updatePhotoPreview(e),this._stopMediaStream(),this._view.updateCameraUI(!1,!0)}},{key:"handleFormSubmit",value:(u=c(i().mark((function t(e){var r,o,u,c,s,h;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.description,o=e.location,t.prev=1,u=[],r&&""!==r.trim()?r.length<10&&u.push("Deskripsi cerita minimal 10 karakter"):u.push("Deskripsi cerita wajib diisi"),this._photoBlob||u.push("Foto cerita wajib diisi"),o||u.push("Lokasi cerita wajib dipilih"),!(u.length>0)){t.next=9;break}return(0,a._d)("Validasi gagal:\n".concat(u.join("\n"))),t.abrupt("return");case 9:return(0,a.Cs)(),t.next=12,n.A.addNewStory({description:r.trim(),photo:this._photoBlob,lat:o.lat,lon:o.lng});case 12:if(!(c=t.sent).error){t.next=15;break}throw new Error(c.message||"Gagal menambahkan cerita");case 15:s={id:c.data.id,name:c.data.name||"Anonymous",description:r.trim(),photoUrl:c.data.photoUrl,createdAt:c.data.createdAt||(new Date).toISOString(),lat:o.lat,lon:o.lng,userId:c.data.userId},this._stopMediaStream(),this._cleanup(),(0,a._d)("Cerita berhasil ditambahkan!"),h=new CustomEvent("story-added",{detail:{story:s}}),window.dispatchEvent(h),(0,a.RZ)(),window.location.hash="#/home",t.next=31;break;case 26:t.prev=26,t.t0=t.catch(1),(0,a._d)("Gagal menambahkan cerita: "+(t.t0.message||"Terjadi kesalahan")),(0,a.RZ)();case 31:case"end":return t.stop()}}),t,this,[[1,26]])}))),function(t){return u.apply(this,arguments)})},{key:"_startCamera",value:(o=c(i().mark((function t(e){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stream&&this._stopMediaStream(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(r);case 5:this._stream=t.sent,this._view.setCameraStream(this._stream),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),(0,a._d)("Gagal memulai kamera: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t){return o.apply(this,arguments)})},{key:"_stopMediaStream",value:function(){this._stream&&(this._stream.getTracks().forEach((function(t){return t.stop()})),this._stream=null)}},{key:"_cleanup",value:function(){this._photoBlob=null}},{key:"_handlePageLeave",value:function(){this._stopMediaStream(),this._cleanup()}}],e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,u,h,l,f}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(e,r,n,a){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype);return c(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var s=h(e,r,n);if("normal"===s.type){if(a=n.done?4:2,s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=4,n.method="throw",n.arg=s.arg)}}}(e,n,new P(a||[])),!0),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var l={};function d(){}function m(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==r&&n.call(w,o)&&(y=w);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,o,i,u){var c=h(t[a],t,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==f(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function x(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l;var o=h(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,l;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,l):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}function S(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function P(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function j(e){if(null!=e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return m.prototype=v,c(b,"constructor",v),c(v,"constructor",m),m.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),c(k.prototype,i,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:j(e),r,n},"next"===this.method&&(this.arg=t),l}},e}function d(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){d(o,n,a,i,u,"next",t)}function u(t){d(o,n,a,i,u,"throw",t)}i(void 0)}))}}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}const g=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=null,this._map=null,this._selectedLocation=null,this._cameraSelect=null},e=[{key:"render",value:(i=m(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="content" id="mainContent">\n        <h2 class="content__heading">Tambah Cerita Baru</h2>\n        <div id="addStoryContainer"></div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=m(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelector("#addStoryContainer").innerHTML=(0,a.NI)(),this._initializePresenter(),this._initMap(),t.next=6,this._initCameraButtons();case 6:this._initFormSubmit();case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_initializePresenter",value:function(){this._presenter=new l({view:this,mapContainerId:"mapAdd",formSelector:"#addStoryForm",startCameraButtonSelector:"#startCamera",capturePhotoButtonSelector:"#capturePhoto",cameraPreviewSelector:"#cameraPreview",photoCanvasSelector:"#photoCanvas",photoPreviewSelector:"#photoPreview",selectedLocationSelector:"#selectedLocation"})}},{key:"_initMap",value:function(){var t=this;this._map=L.map("mapAdd").setView([-2.548926,118.014863],5);var e={"Peta Jalan":L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:18}).addTo(this._map),Satelit:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri and others",maxZoom:18}),Topografi:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"Map data: © OpenStreetMap contributors, SRTM | Map style: © OpenTopoMap",maxZoom:17})};L.control.layers(e).addTo(this._map),this._map.on("click",(function(e){t._selectedLocation&&t._map.removeLayer(t._selectedLocation),t._selectedLocation=L.marker(e.latlng).addTo(t._map),document.querySelector("#selectedLocation").innerHTML="Lat: ".concat(e.latlng.lat.toFixed(6),", Lon: ").concat(e.latlng.lng.toFixed(6))}))}},{key:"_initCameraButtons",value:(n=m(p().mark((function t(){var e,r,n,a,o=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.querySelector("#startCamera"),r=document.querySelector("#capturePhoto"),n=document.querySelector("#cameraPreview"),a=document.querySelector("#photoCanvas"),document.querySelector("#photoPreview"),this._cameraSelect=document.createElement("select"),this._cameraSelect.id="cameraSelect",this._cameraSelect.style.display="none",this._cameraSelect.innerHTML='<option value="">Pilih Kamera</option>',e.parentNode.insertBefore(this._cameraSelect,e.nextSibling),e.addEventListener("click",(function(){return o._presenter.handleCameraButtonClick()})),this._cameraSelect.addEventListener("change",(function(){o._cameraSelect.value&&o._presenter.handleCameraChange(o._cameraSelect.value)})),r.addEventListener("click",(function(){var t=a.getContext("2d");a.width=n.videoWidth,a.height=n.videoHeight,t.drawImage(n,0,0,a.width,a.height),a.toBlob((function(t){return o._presenter.handlePhotoCapture(t)}),"image/jpeg",.8)})),t.next=15,this._presenter.populateCameraDevices();case 15:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_initFormSubmit",value:function(){var t=this;document.querySelector("#addStoryForm").addEventListener("submit",function(){var e=m(p().mark((function e(r){var n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=document.querySelector("#description").value,a=t._selectedLocation?t._selectedLocation.getLatLng():null,e.next=5,t._presenter.handleFormSubmit({description:n,location:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"updateCameraDevices",value:function(t){var e=this;this._cameraSelect.innerHTML='<option value="">Pilih Kamera</option>',t.forEach((function(t,r){var n=document.createElement("option");n.value=t.deviceId,n.text=t.label||"Kamera ".concat(r+1),e._cameraSelect.appendChild(n)}))}},{key:"updateCameraUI",value:function(t,e){var r=document.querySelector("#cameraPreview"),n=document.querySelector("#capturePhoto"),a=document.querySelector("#startCamera");t?(r.style.display="block",n.style.display="block",this._cameraSelect.style.display="block",a.textContent="Tutup Kamera"):(r.style.display="none",n.style.display="none",this._cameraSelect.style.display="none",a.textContent=e?"Ambil Ulang Foto":"Buka Kamera")}},{key:"updatePhotoPreview",value:function(t){document.querySelector("#photoPreview").innerHTML='<img src="'.concat(t,'" alt="Foto yang diambil" class="captured-photo">')}},{key:"setCameraStream",value:function(t){document.querySelector("#cameraPreview").srcObject=t}},{key:"cleanup",value:function(){this._selectedLocation&&(this._map.removeLayer(this._selectedLocation),this._selectedLocation=null)}}],e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i}()},942:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function h(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype);return h(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var s=f(e,r,n);if("normal"===s.type){if(a=n.done?4:2,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=4,n.method="throw",n.arg=s.arg)}}}(e,n,new P(a||[])),!0),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function d(){}function m(){}function v(){}var y={};h(y,u,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==r&&o.call(w,u)&&(y=w);var b=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,i,u,c){var s=f(t[a],t,i);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==n(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):e.resolve(l).then((function(t){h.value=t,u(h)}),(function(t){return r("throw",t,u,c)}))}c(s.arg)}var a;h(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function x(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function S(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function P(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function j(e){if(null!=e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(o.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return m.prototype=v,h(b,"constructor",v),h(v,"constructor",m),m.displayName=h(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,h(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),h(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(b),h(b,s,"Generator"),h(b,u,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:j(e),r,n},"next"===this.method&&(this.arg=t),p}},e}function o(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function u(t){o(i,n,a,u,c,"next",t)}function c(t){o(i,n,a,u,c,"throw",t)}u(void 0)}))}}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}r.d(e,{A:()=>s});const s=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(o=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="about" id="mainContent" tabindex="0">\n        <div class="about__content">\n          <h2 class="content__heading">Tentang Kami</h2>\n          <p class="about__intro">\n            StoryApp adalah platform inovatif untuk berbagi cerita pengalaman, petualangan, dan inspirasi. \n            Dengan antarmuka yang intuitif, kamu dapat mengunggah cerita dengan foto, menandai lokasi di peta interaktif, \n            dan menjelajahi kisah dari komunitas global kami.\n          </p>\n\n          <h3 class="about__subheading">Misi Kami</h3>\n          <p class="about__mission">\n            Kami percaya setiap cerita memiliki kekuatan untuk menginspirasi dan menghubungkan. \n            StoryApp hadir untuk memberi ruang bagi semua orang untuk menceritakan kisah mereka, \n            dari petualangan kecil hingga momen yang mengubah hidup.\n          </p>\n\n          <h3 class="about__subheading">Fitur Unggulan</h3>\n          <div class="about__features">\n            <div class="feature__item">\n              <i class="fas fa-camera"></i>\n              <h4>Unggah dengan Mudah</h4>\n              <p>Abadikan momen dengan foto langsung dari kamera dan bagikan ceritamu dalam hitungan detik.</p>\n            </div>\n            <div class="feature__item">\n              <i class="fas fa-map-marked-alt"></i>\n              <h4>Peta Interaktif</h4>\n              <p>Tandai lokasi ceritamu dan jelajahi kisah dari berbagai penjuru dunia di peta kami.</p>\n            </div>\n            <div class="feature__item">\n              <i class="fas fa-globe"></i>\n              <h4>Komunitas Global</h4>\n              <p>Terhubung dengan pengguna lain, temukan inspirasi, dan jadilah bagian dari komunitas StoryApp.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelectorAll('a[href^="#"]:not([href^="#/"])').forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault();var r=t.getAttribute("href").substring(1),n=document.getElementById(r);n&&n.scrollIntoView({behavior:"smooth"})}))}));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}],e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}()}}]);
//# sourceMappingURL=app~545fd537.bundle.js.map